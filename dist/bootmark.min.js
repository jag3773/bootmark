/**!
* @file bootmark: easy markdown + bootstrap
* @author [obedm503](https://github.com/obedm503/)
* @git [git repo](https://github.com/obedm503/bootmark.git)
* @examples [examples/starters/templates](https://obedm503.github.io/bootmark/docs/examples.html)
* @version 0.6.0
* @license MIT
*/
!function(window,document){"use scrict";function defineBootmark(){function _insertLinkTag(t){if(!window.$('link[href="'+t+'"]').length){var e=window.$("<link />");e.attr({href:t,rel:"stylesheet"}),window.$("head").append(e)}}function _insertMetaTag(t,e){if(!window.$('meta[content="'+e+'"]').length){var o=window.$("<meta />");o.attr({name:t,content:e}),window.$("head").append(o)}}function _replaceHtml(t,e){return t.replace(/\$\{bootmark\-html\}/gi,e)}function _insertHtml(t,e,o){return new Promise(function(n){var i=new window.showdown.Converter(e.showdown).makeHtml(o);if(e.template.text?e.template.html=_replaceHtml(e.template.text,i):window.$("#"+e.template.id).length?e.template.html=_replaceHtml(window.$("#"+e.template.id).html(),i):e.html.toc?e.template.html='<div class="container-fluid" id="'+e.html.tocTitle.replace(/ /gi,"-")+'"><div class="row"><div class="col-sm-3 col-md-3 col-lg-2"><nav class="navbar navbar-default navbar-fixed-side"><div class="container"><div class="navbar-header"><button class="navbar-toggle" data-target="#nav" data-toggle="collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand active page-scroll" href="#'+e.html.tocTitle.replace(/ /g,"-")+'">'+e.html.tocTitle+'</a></div><div class="collapse navbar-collapse" id="nav"><ul class="bootmark-toc nav navbar-nav"></ul></div></div></nav></div><div class="bootmark-main bootmark-toc col-sm-9 col-md-9 col-lg-10">'+i+"</div></div></div>":e.template.html='<div class="container"><div class="row"><div class="bootmark-main">'+i+"</div></div></div>",c.debug(e),t.html(e.template.html),e.html.toc&&window.$("h1, h2, h3, h4, h5, h6",t).each(function(e,o){window.$(".bootmark-toc.nav.navbar-nav",t).append(window.$("<li></li>").addClass("bootmark-"+o.localName).html(' <a class="page-scroll" href="#'+o.id+'">'+o.innerText+"</a>"))}),window.$("table",t).length&&window.$("table",t).addClass(" table table-striped table-bordered ").wrap(' <div class="table-responsive"></div> '),e.html.indent&&window.$("p",t).length&&window.$("p",t).addClass("bootmark-indent"),e.html.credit&&!window.$("#bootmark-footer").length){var a='<div class="container-fluid bg-primary"><p class="text-center"><a style="color: inherit" href="https://obedm503.github.io/bootmark">This project uses bootmark. Bootmark allows developers to focus on their projects and not how they are presented.</a><p></div>',r=window.$('<footer id="bootmark-footer"></footer>').html(a);window.$("body").append(r)}e.showdown.extensions.indexOf("prettify")>=0&&window.prettyPrint(),n(i)})}var c={logging:!1,log:function(t){this.logging&&console.log(t)},debug:function(t){this.logging&&console.debug(t)},error:function(t){this.logging&&console.error(t)}},defaults={markdown:!1,fetch:!1,join:"----",css:"https://obedm503.github.io/bootmark/dist/bootmark.min.css",promise:!1,template:{text:!1,fetch:!1,id:"bootmark-template",html:""},html:{indent:!1,toc:!0,tocTitle:window.$(document).attr("title"),theme:"readable",prettifyTheme:"atelier-forest-light",prettify:!0,credit:!0},showdown:{parseImgDimensions:!0,simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,tasklists:!0,extensions:[]}};window.$.fn.bootmark=function(options){var element=this;if("string"==typeof options.html||"string"==typeof options.showdown||"string"==typeof options.fetch)for(var i in options)"string"==typeof options[i]&&("html"===i||"template"===i||"showdown"===i||"fetch"===i&&"["===options[i].trim()[0])&&options.hasOwnProperty(i)&&(options[i]=eval("("+options[i]+")"));var config=window.$.extend(!0,{},defaults,window.$.fn.bootmark.options||{},options);config.html.prettify&&config.showdown.extensions.indexOf("prettify")<0&&"undefined"!=typeof window.prettyPrint&&config.showdown.extensions.push("prettify"),element.hide(),_insertMetaTag("viewport","width=device-width, initial-scale=1"),_insertLinkTag("https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/"+config.html.theme.toLowerCase()+"/bootstrap.min.css"),_insertLinkTag(config.css),config.showdown.extensions.indexOf("prettify")>=0&&_insertLinkTag("https://jmblog.github.io/color-themes-for-google-code-prettify/themes/"+config.html.prettifyTheme.toLowerCase().replace(/ /gi,"-")+".min.css","bootmark-prettify-theme");var inserted;if(config.markdown)inserted=_insertHtml(element,config,config.text);else if(config.fetch)if("string"==typeof config.fetch)inserted=window.fetch(config.fetch).then(function(t){return t.text()}).then(function(t){return _insertHtml(element,config,t)});else{var fetches=config.fetch.map(function(t){return window.fetch(t).then(function(t){return t.text()})});inserted=window.Promise.all(fetches).then(function(t){var e=t.join("\n\n"+config.join+"\n\n\n");return _insertHtml(element,config,e)})}else inserted=_insertHtml(element,config,element.text());return config.promise?inserted.then(function(t){return element.show(),t},function(){element.show()}):(inserted.then(function(){element.show()},function(){element.show()}),element)},window.$(function(){window.$(document).on("click","a.page-scroll",function(t){t.preventDefault(),c.log(window.$.attr(this,"href")),window.$("html, body").animate({scrollTop:window.$(window.$.attr(this,"href")).offset().top},900)}),window.$("#nav a").click(function(){window.$("#nav").collapse("hide")}),window.$("bootmark").length&&window.$("bootmark").each(function(){var t=window.$(this);t.bootmark({fetch:t.attr("fetch"),join:t.attr("join"),template:t.attr("template"),html:t.attr("html"),css:t.attr("css"),showdown:t.attr("showdown"),promise:t.attr("promise")})}),window.$(".bootmark").length&&window.$(".bootmark").each(function(){var t=window.$(this);t.bootmark({fetch:t.attr("data-fetch"),join:t.attr("data-join"),template:t.attr("data-template"),html:t.attr("data-html"),css:t.attr("data-css"),showdown:t.attr("data-showdown"),promise:t.attr("data-promise")})})})}if("undefined"==typeof window.$)throw new Error("JQuery is not defined");if("undefined"==typeof window.showdown)throw new Error("Showdown is not defined");if("undefined"==typeof window.$.fn.modal)throw new Error("Bootstrap is not defined");"undefined"==typeof window.prettyPrint&&console.warn("Code Prettify is not defined"),"undefined"==typeof window.Promise&&console.warn("Promise API is not defined"),"undefined"==typeof window.fetch&&console.warn("fetch API is not defined"),"undefined"==typeof window.$.fn.bootmark&&defineBootmark()}(window,document);