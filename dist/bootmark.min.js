/**!
* @file bootmark: markdown + bootstrap
* @author [obedm503](https://github.com/obedm503/)
* @git [git repo](https://github.com/obedm503/bootmark.git)
* @examples [examples/starter/templates](https://obedm503.github.io/bootmark/examples/index.html)
* @version 0.4.0
* @license MIT
*/
!function(window,document){"use scrict";function defineBootmark(){function _insertLinkTag(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",document.head.appendChild(e)}function _insertMetaTag(t,e){var n=document.createElement("meta");n.name=t,n.content=e,document.head.appendChild(n)}function _insertHtml(t,e,n){return new Promise(function(o){var i=new window.showdown.Converter(e.showdown).makeHtml(n);e.html.toc?e.template='<div class="container-fluid"><div class="row"><div class="col-sm-3 col-md-3 col-lg-2"><nav class="navbar navbar-default navbar-fixed-side"><div class="container"><div class="navbar-header"><button class="navbar-toggle" data-target="#nav" data-toggle="collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand active page-scroll" href="#'+t.attr("id")+'">'+window.$(document).attr("title")+'</a></div><div class="collapse navbar-collapse" id="nav"><ul id="bootmark-toc" class="nav navbar-nav"></ul></div></div></nav></div><div id="bootmark-main" class="col-sm-9 col-md-9 col-lg-10">'+i+"</div></div></div>":e.template='<div class="container"><div class="row"><div id="bootmark-main" class="col-sm-10 col-md-9 col-lg-8">'+i+"</div></div></div>";var a=t.html(e.template).promise();console.log(a),a.then(function(){if(window.$("a").length){var n=window.$("a");n.each(function(){window.$(window.$(this).attr("href")).length&&window.$(this).addClass("page-scroll")})}e.html.toc&&window.$("h1, h2, h3, h4, h5, h6").each(function(t,e){window.$("#bootmark-toc").append(window.$(document.createElement("li")).addClass("bootmark-"+e.localName).html(' <a class="page-scroll" href="#'+e.id+'">'+e.innerText+"</a>"))}),window.$("table").length&&window.$("table").addClass(" table table-striped table-bordered ").wrap(' <div class="table-responsive"></div> '),e.html.indent&&window.$("p").length&&window.$("p").addClass("bootmark-indent"),e.showdown.extensions.indexOf("prettify")>=0&&window.prettyPrint(),console.log("before: ",t),o(i),console.log("after: ",t)})})}var defaults={markdown:!1,fetch:!1,css:"dist/bootmark.min.css",promise:!1,html:{indent:!1,toc:!0,theme:"readable",prettifyTheme:"atelier-forest-light",prettify:!0},showdown:{parseImgDimensions:!0,simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,tasklists:!0,extensions:[]}};window.$.fn.bootmark=function(options){var element=this;if("string"==typeof options.html||"string"==typeof options.showdown)for(var i in options)"html"!==i&&"showdown"!==i||"string"!=typeof options[i]||!options.hasOwnProperty(i)||(options[i]=eval("("+options[i]+")"));var config=$.extend(!0,{},defaults,options);config.html.prettify&&config.showdown.extensions.indexOf("prettify")<0&&config.showdown.extensions.push("prettify"),element.hide(),_insertMetaTag("viewport","width=device-width, initial-scale=1"),_insertLinkTag("https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/"+config.html.theme.toLowerCase()+"/bootstrap.min.css"),_insertLinkTag(config.css),config.showdown.extensions.indexOf("prettify")>=0&&_insertLinkTag("https://jmblog.github.io/color-themes-for-google-code-prettify/themes/"+config.html.prettifyTheme+".min.css");var inserted;return inserted=config.markdown?_insertHtml(element,config,config.text):config.fetch?window.fetch(config.fetch).then(function(t){return t.text()}).then(function(t){return _insertHtml(element,config,t)}):_insertHtml(element,config,element.text()),config.promise?inserted.then(function(t){return element.show(),t}):(inserted.then(function(){element.show(),console.log("good")},function(){element.show(),console.log("fail")}),element)},window.$(function(){if(window.$(document).on("click","a.page-scroll",function(t){t.preventDefault(),console.log(window.$.attr(this,"href")),window.$("html, body").animate({scrollTop:window.$(window.$.attr(this,"href")).offset().top},900)}),window.$("#nav a").click(function(){window.$("#nav").collapse("hide")}),window.$("bootmark").length){var t=window.$("bootmark").attr("id","bootmark");t.bootmark({fetch:t.attr("fetch"),html:t.attr("html"),css:t.attr("css"),showdown:t.attr("showdown"),promise:t.attr("promise")})}else if(window.$("#bootmark").length){var e=window.$("#bootmark");e.bootmark({fetch:e.attr("data-fetch"),html:e.attr("data-html"),css:e.attr("data-css"),showdown:e.attr("data-showdown"),promise:e.attr("data-promise")})}})}if("undefined"==typeof window.$)throw new Error("JQuery is not defined");if("undefined"==typeof window.$.fn.modal)throw new Error("Bootstrap is not defined");"undefined"==typeof window.prettyPrint&&console.warn("Code Prettify is not defined"),"undefined"==typeof window.Promise&&console.warn("Promise API is not defined"),"undefined"==typeof window.fetch&&console.warn("fetch API is not defined"),"undefined"==typeof window.$.fn.bootmark&&defineBootmark()}(window,document);